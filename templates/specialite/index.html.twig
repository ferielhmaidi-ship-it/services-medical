{% extends 'base.html.twig' %}

{% block title %}Gestion des Specialites{% endblock %}

{% block body %}
<style>
    body { font-family: Arial, sans-serif; background: #f5f6fa; color: #333; }
    .container { max-width: 800px; margin: 2em auto; padding: 20px; background: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-radius: 8px; }
    h1, h2 { color: #2c3e50; }
    form { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
    input[type="text"] { flex: 1; padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; }
    button { padding: 8px 15px; background: #3498db; color: #fff; border: none; border-radius: 4px; cursor: pointer; transition: background 0.3s; }
    button:hover { background: #2980b9; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background: #ecf0f1; }
    tr:hover { background: #f1f1f1; }
    .flash { padding: 10px; margin-bottom: 15px; border-radius: 4px; background: #2ecc71; color: #fff; }
    .btn-delete { background: #e74c3c; }
    .btn-delete:hover { background: #c0392b; }
    .btn-edit { background: #f39c12; }
    .btn-edit:hover { background: #d35400; }
</style>

<div class="container">
    <h1>Gestion des Specialites</h1>

    {% for msg in app.flashes('success') %}
        <div class="flash">{{ msg }}</div>
    {% endfor %}

    {# ===== Ajouter ===== #}
    <h2>Ajouter Nouvelle Specialite</h2>
    <form method="post" action="{{ path('app_specialite') }}">
        <input type="text" name="nom" placeholder="Nom" required>
        <input type="text" name="description" placeholder="Description">
        <input type="hidden" name="_token" value="{{ csrf_token('form_new') }}">
        <input type="hidden" name="action" value="add">
        <button type="submit">Ajouter</button>
    </form>

    <hr>

    <h2>Liste des Specialites</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Nom</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
        {% for s in specialites %}
        <tr>
            <td>{{ s.id }}</td>
            <td>
                <form method="post" action="{{ path('app_specialite') }}">
                    <input type="text" name="nom" value="{{ s.nom }}" required>
            </td>
            <td>
                    <input type="text" name="description" value="{{ s.description }}">
            </td>
            <td>
                    <input type="hidden" name="_token" value="{{ csrf_token('form_edit' ~ s.id) }}">
                    <input type="hidden" name="id" value="{{ s.id }}">
                    <input type="hidden" name="action" value="edit">
                    <button type="submit" class="btn-edit">Modifier</button>
                </form>

                <form method="post" action="{{ path('app_specialite') }}" style="display:inline;">
                    <input type="hidden" name="_token" value="{{ csrf_token('form_delete' ~ s.id) }}">
                    <input type="hidden" name="id" value="{{ s.id }}">
                    <input type="hidden" name="action" value="delete">
                    <button type="submit" class="btn-delete" onclick="return confirm('Supprimer cette specialite ?')">Supprimer</button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4">Pas de Specialites</td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
